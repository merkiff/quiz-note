[build]
  publish = "dist"
  command = """
    curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh -s -- -y && \
    source $HOME/.cargo/env && \
    rustup target add wasm32-unknown-unknown && \
    (command -v trunk > /dev/null 2>&1 || cargo install trunk) && \
    trunk build --release
  """

[build.environment]
  RUST_VERSION = "stable"

[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200